# TCP 4002 -> backend 170.205.37.94:4002
upstream backend_4002_tcp {
    server 170.205.37.94:4002;   # Replace with your backend if needed
}

server {
    listen 0.0.0.0:4002;          # Listen on TCP/4002 (IPv4)
    listen [::]:4002;             # Listen on TCP/4002 (IPv6)
    proxy_connect_timeout 5s;     # Upstream connect timeout
    proxy_timeout 300s;           # Session timeout
    proxy_pass backend_4002_tcp;  # Forward to backend

    # Enable bandwidth logging
    access_log /var/log/nginx/stream_4002_tcp_bandwidth.log proxy_bandwidth;
}

# UDP 4002 -> backend 170.205.37.94:4002
# upstream backend_4002_udp {
#     server 170.205.37.94:4002;   # Same backend for UDP
# }

# server {
#     listen 0.0.0.0:4002 udp;      # Listen on UDP/4002 (IPv4)
#     listen [::]:4002 udp;         # Listen on UDP/4002 (IPv6)
#     proxy_timeout 120s;           # UDP session timeout
#     proxy_pass backend_4002_udp;  # Forward to backend

#     # Enable bandwidth logging
#     access_log /var/log/nginx/stream_4002_udp_bandwidth.log proxy_bandwidth;
# }
